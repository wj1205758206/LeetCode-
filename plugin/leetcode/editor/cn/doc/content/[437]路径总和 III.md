<p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ <code>root</code>Â ï¼Œå’Œä¸€ä¸ªæ•´æ•° <code>targetSum</code> ï¼Œæ±‚è¯¥äºŒå‰æ ‘é‡ŒèŠ‚ç‚¹å€¼ä¹‹å’Œç­‰äº <code>targetSum</code> çš„ <strong>è·¯å¾„</strong> çš„æ•°ç›®ã€‚</p>

<p><strong>è·¯å¾„</strong> ä¸éœ€è¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¹Ÿä¸éœ€è¦åœ¨å¶å­èŠ‚ç‚¹ç»“æŸï¼Œä½†æ˜¯è·¯å¾„æ–¹å‘å¿…é¡»æ˜¯å‘ä¸‹çš„ï¼ˆåªèƒ½ä»çˆ¶èŠ‚ç‚¹åˆ°å­èŠ‚ç‚¹ï¼‰ã€‚</p>

<p>Â </p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>

<p><img src="https://assets.leetcode.com/uploads/2021/04/09/pathsum3-1-tree.jpg" style="width: 452px; " /></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>root = [10,5,-3,3,2,null,11,3,-2,null,1], targetSum = 8
<strong>è¾“å‡ºï¼š</strong>3
<strong>è§£é‡Šï¼š</strong>å’Œç­‰äº 8 çš„è·¯å¾„æœ‰ 3 æ¡ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>root = [5,4,8,11,null,13,4,7,2,null,null,5,1], targetSum = 22
<strong>è¾“å‡ºï¼š</strong>3
</pre>

<p>Â </p>

<p><strong>æç¤º:</strong></p>

<ul>
	<li>äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°çš„èŒƒå›´æ˜¯ <code>[0,1000]</code></li>
	<li><meta charset="UTF-8" /><code>-10<sup>9</sup>Â <= Node.val <= 10<sup>9</sup></code>Â </li>
	<li><code>-1000Â <= targetSumÂ <= 1000</code>Â </li>
</ul>
<details><summary><strong>Related Topics</strong></summary>æ ‘ | æ·±åº¦ä¼˜å…ˆæœç´¢ | äºŒå‰æ ‘</details><br>

<div>ğŸ‘ 1408, ğŸ‘ 0</div>

<div id="labuladong"><hr>

**é€šçŸ¥ï¼š[æ•°æ®ç»“æ„ç²¾å“è¯¾ V1.8](https://aep.h5.xeknow.com/s/1XJHEO) æŒç»­æ›´æ–°ä¸­ã€‚**

<details><summary><strong>labuladong æ€è·¯</strong></summary>

## åŸºæœ¬æ€è·¯

è¿™é¢˜çš„éš¾åº¦åº”è¯¥è®¾ç½®ä¸ºå›°éš¾ï¼Œå› ä¸ºè¿™é¢˜åŠè¦æ±‚ä½ å‡†ç¡®ç†è§£äºŒå‰æ ‘çš„å‰åºååºéå†ï¼Œè¿˜è¦ç†Ÿæ‚‰å‰ç¼€å’ŒæŠ€å·§ï¼ŒæŠŠå‰ç¼€å’ŒæŠ€å·§ç”¨åˆ°äºŒå‰æ ‘ä¸Šã€‚

ä½ å¯ä»¥å…ˆçœ‹å‰æ–‡ [å‰ç¼€å’ŒæŠ€å·§](https://appktavsiei5995.pc.xiaoe-tech.com/detail/i_62656034e4b0cedf38a93af3/1)ï¼Œç„¶ååšä¸€ä¸‹ [560. å’Œä¸ºKçš„å­æ•°ç»„](/problems/subarray-sum-equals-k)ï¼Œåº”è¯¥èƒ½å¤Ÿç†è§£è¿™é“é¢˜çš„æ€è·¯äº†ã€‚

ä½ æŠŠäºŒå‰æ ‘çœ‹åšæ˜¯æ•°ç»„ï¼Œåˆ©ç”¨å‰ååºéå†æ¥ç»´æŠ¤å‰ç¼€å’Œï¼Œçœ‹ä¸‹å›¾å°±èƒ½ç†è§£è§£æ³•ä¸­å‡ ä¸ªå…³é”®å˜é‡çš„å…³ç³»äº†ï¼š

![](https://labuladong.github.io/algo/images/çŸ­é¢˜è§£/437.jpeg)

**æ ‡ç­¾ï¼š[äºŒå‰æ ‘](https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzAxODQxMDM0Mw==&action=getalbum&album_id=2121994699837177859)ï¼Œå‰ç¼€å’Œ**

## è§£æ³•ä»£ç 

```java
class Solution {
    // è®°å½•å‰ç¼€å’Œ
    // å®šä¹‰ï¼šä»äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œè·¯å¾„å’Œä¸º pathSum çš„è·¯å¾„æœ‰ preSumCount.get(pathSum) ä¸ª
    HashMap<Integer, Integer> preSumCount = new HashMap<>();

    int pathSum, targetSum;
    int res = 0;

    public int pathSum(TreeNode root, int targetSum) {
        if (root == null) {
            return 0;
        }
        this.pathSum = 0;
        this.targetSum = targetSum;
        this.preSumCount.put(0, 1);
        traverse(root);
        return res;
    }

    void traverse(TreeNode root) {
        if (root == null) {
            return;
        }
        // å‰åºéå†ä½ç½®
        pathSum += root.val;
        // ä»äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œè·¯å¾„å’Œä¸º pathSum - targetSum çš„è·¯å¾„æ¡æ•°
        // å°±æ˜¯è·¯å¾„å’Œä¸º targetSum çš„è·¯å¾„æ¡æ•°
        res += preSumCount.getOrDefault(pathSum - targetSum, 0);
        // è®°å½•ä»äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œè·¯å¾„å’Œä¸º pathSum çš„è·¯å¾„æ¡æ•°
        preSumCount.put(pathSum, preSumCount.getOrDefault(pathSum, 0) + 1);

        traverse(root.left);
        traverse(root.right);

        // ååºéå†ä½ç½®
        preSumCount.put(pathSum, preSumCount.get(pathSum) - 1);
        pathSum -= root.val;
    }
}
```

**ç±»ä¼¼é¢˜ç›®**ï¼š
  - [å‰‘æŒ‡ Offer II 050. å‘ä¸‹çš„è·¯å¾„èŠ‚ç‚¹ä¹‹å’Œ ğŸŸ ](/problems/6eUYwP)

</details>
</div>













